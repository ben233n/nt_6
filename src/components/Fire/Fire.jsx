import React from 'react'
import styles from './Fire.module.css'
import Title from '../Title/Title'
import Firecard from '../Firecard/Firecard'
import { Link } from 'react-router'
import { motion } from 'motion/react'
import { LeftLookDelay, LeftLookItem } from '../Anime';
import { useQuery } from '@tanstack/react-query';
import { fetchStores } from '../../api/firestore/fetchStores'; 

const Fire = () => {
  const { data, isLoading, isError } = useQuery({
    queryKey: ['stores'],         // 快取的 key 名稱
    queryFn: fetchStores         // API 函數
  });
  if (isLoading) {
    return <div className={styles.bg}>載入中...</div>;
  }

  if (isError || !Array.isArray(data)) {
    return <div className={styles.bg}>發生錯誤或資料格式錯誤</div>;
  }

  return (
    <div className={styles.bg}>
        <motion.svg {...LeftLookDelay}  className={styles.hana} width="243" height="215" viewBox="0 0 243 215" fill="none" xmlns="http://www.w3.org/2000/svg">
          <motion.path variants={LeftLookItem} d="M16.6017 229.054C20.2062 215.48 28.6761 208.719 38.8731 196.999C49.0701 185.28 51.462 183.173 63.6557 183.961C75.8493 184.75 82.3099 183.807 81.9947 184.462C81.6796 185.118 83.4706 199.624 70.5515 205.465C57.6323 211.307 44.7503 204.235 36.1157 207.993C27.4812 211.75 23.0124 215.31 23.0124 215.31C23.0124 215.31 27.9458 205.458 20.6068 189.724C13.2678 173.989 12.8897 157.159 21.5326 148.195C30.1755 139.23 43.8758 151.428 43.8758 151.428C43.8758 151.428 37.9043 151.491 34.5597 162.749C31.2151 174.008 29.8071 186.223 29.7456 193.725C29.684 201.228 27.1089 206.789 27.1089 206.789C27.1089 206.789 30.751 203.31 38.5941 182.763C46.4373 162.215 64.7871 140.434 64.7871 140.434C64.7871 140.434 88.7724 142.779 97.7128 141.594C106.653 140.409 109.165 138.394 107.498 133.871C105.832 129.349 90.728 116.246 83.9924 110.865C77.2568 105.483 64.4696 114.123 50.8987 121.799C37.3278 129.474 35.6458 137.343 42.3897 137.518M42.3897 137.518C49.1336 137.693 75.7071 139.16 87.5847 138.626C99.4623 138.091 102.737 139.542 100.995 135.86C99.2527 132.177 87.9492 127.762 78.8226 126.466C69.6961 125.17 42.3897 137.518 42.3897 137.518Z" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
          <motion.path variants={LeftLookItem} d="M74.9185 109.729C58.4984 114.186 49.9131 107.735 38.9574 102.869C28.0018 98.0038 16.5702 98.7028 15.4798 93.1869C14.3894 87.6709 22.1832 77.3316 33.4417 78.836C44.7003 80.3403 58.6937 88.4479 65.3211 96.4437C71.9486 104.44 75.1803 106.935 75.1803 106.935C75.1803 106.935 71.8943 104.757 59.0358 101.118C46.1772 97.4797 24.7351 98.5758 24.7351 98.5758" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
          <motion.path variants={LeftLookItem} d="M75.18 106.935C75.18 106.935 83.5313 102.06 84.4849 94.8867C85.4385 87.7136 82.7434 83.0523 79.1172 84.2699C73.4403 86.1773 74.5373 103.561 74.5373 103.561C74.5373 103.561 66.7115 94.6427 60.7913 88.4528C54.8711 82.2628 62.1197 69.1656 71.6249 66.2598C81.13 63.3541 86.3985 71.3776 86.3985 71.3776C86.3985 71.3776 93.9456 68.0383 99.9958 73.0702C106.046 78.1022 106.625 83.0433 102.342 89.0836C98.0597 95.1238 84.3765 102.479 84.3765 102.479C84.3765 102.479 85.205 99.3976 92.5884 95.033C99.9719 90.6684 109.868 86.2669 120.205 93.1712C130.541 100.075 131.375 113.842 127.56 119.524M127.56 119.524C127.56 119.524 126.97 115.833 111.84 114.394C96.7088 112.956 79.8706 111.996 77.4122 111.715C74.9538 111.434 78.8098 103.668 91.8209 104.687C120.831 106.958 127.56 119.524 127.56 119.524Z" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
          <motion.path variants={LeftLookItem} d="M63.3947 226.543C77.9361 207.714 92.9345 197.422 106.921 190.297C120.908 183.171 123.957 182.086 135.323 187.087C146.69 192.088 153.205 193.495 152.666 193.983C152.128 194.472 148.587 208.351 134.126 209.151C119.667 209.952 109.918 198.97 100.307 199.371C90.6946 199.772 85.1363 201.455 85.1363 201.455C85.1363 201.455 87.7527 197.788 92.1355 195.11C92.1355 195.11 96.8751 193.21 111.809 177.194C126.743 161.178 152.163 147.723 152.163 147.723C152.163 147.723 174.234 158.285 183.206 160.342C192.179 162.398 195.307 161.439 195.353 156.722C195.398 152.006 185.709 134.734 181.222 127.455C176.733 120.173 161.387 123.576 145.64 125.823C129.893 128.07 125.436 134.668 131.817 137.196M131.817 137.196C138.198 139.723 163.061 150.393 174.603 154.075C186.147 157.756 188.75 160.23 188.419 156.255C188.088 152.279 178.884 144.278 170.632 139.89C162.381 135.504 131.817 137.196 131.817 137.196Z" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
          <motion.path variants={LeftLookItem} d="M172.961 123.23C155.657 121.536 149.789 112.631 141.083 104.34C132.374 96.0498 121.198 92.6749 122.154 87.2534C123.109 81.8318 134.299 75.1234 144.513 80.4488C154.725 85.7759 165.162 98.0945 168.6 107.725C172.039 117.357 174.223 120.77 174.223 120.77C174.223 120.77 171.872 117.627 160.902 109.789C149.933 101.951 129.046 95.4266 129.046 95.4266" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
          <motion.path variants={LeftLookItem} d="M174.223 120.77C174.223 120.77 183.968 119.248 187.478 113.031C190.985 106.813 190.096 101.608 186.191 101.449C180.076 101.198 174.831 117.463 174.831 117.463C174.831 117.463 170.581 106.568 167.165 98.8364C163.749 91.1027 175.418 81.6838 185.553 82.3666C195.687 83.0486 197.817 92.2279 197.817 92.2279C197.817 92.2279 206.237 91.8261 210.197 98.5472C214.157 105.268 212.921 109.984 206.641 113.999C200.363 118.013 184.624 119.929 184.624 119.929C184.624 119.929 186.532 117.404 195.167 116.01C203.803 114.614 214.852 114.067 222.23 124.003C229.609 133.94 225.421 146.807 219.718 150.659M219.718 150.659C219.718 150.659 220.491 147.08 206.554 140.454C192.616 133.829 176.873 127.04 174.625 125.92C172.378 124.8 178.874 119.06 190.939 124.558C217.839 136.817 219.718 150.659 219.718 150.659Z" stroke="var(--text-ttitle-color)" strokeWidth="1.33333" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>
        </motion.svg>
        <div className={`container`}>
            <Title bigtitle="熱銷商品" />
            <motion.div className={styles.down} {...LeftLookDelay}>
                <motion.div className={styles.text} variants={LeftLookItem}>
                    <h3 className={styles.h3}>來自於大自然的鬼斧神工<br/>每一件商品都是非凡之作</h3>
                    <p className={styles.p}>商品皆是透過專業人員從原產地取得</p>
                    <p className={styles.p}>每塊石頭、小草等商品皆保留天然紋理</p>
                    <p className={styles.p}>使得每件商品都是獨一無二的</p>
                    <p className={styles.p}>快來商店探索大自然的美妙吧</p>
                    <Link to="/shop/"><button className={styles.btn}>前往商店</button></Link>
                    
                </motion.div>
                {data.length > 0 && <Firecard shopimg={data[0]?.image} top="TOP 1" word={data[0]?.name} link_name={"/shop/1"} />}
                {data.length > 1 && <Firecard shopimg={data[1]?.image} top="TOP 2" word={data[1]?.name} link_name={"/shop/2"} />}
                

            </motion.div>
        </div>

    </div>
  )
}

export default Fire